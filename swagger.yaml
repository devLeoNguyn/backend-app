openapi: 3.0.0
info:
  title: Movie Backend API
  description: |
    API documentation cho ·ª©ng d·ª•ng Movie Backend
    
    **üîÑ PHI√äN B·∫¢N ƒê√É C·∫¨P NH·∫¨T:**
    - ‚ùå ƒê√£ b·ªè JWT tokens  
    - ‚ùå ƒê√£ b·ªè authentication middleware
    - ‚úÖ S·ª≠ d·ª•ng userId ƒë∆°n gi·∫£n
    
    **üìã C√ÅCH S·ª¨ D·ª§NG:**
    1. **ƒêƒÉng k√Ω/ƒêƒÉng nh·∫≠p:** Nh·∫≠n ƒë∆∞·ª£c `userId` t·ª´ response
    2. **L∆∞u userId:** Store trong AsyncStorage/localStorage  
  version: 1.0.0
  contact:
    email: your-email@example.com

servers:
  - url: http://localhost:3003
    description: Development server
  - url: https://backend-app-lou3.onrender.com
    description: Production server

tags:
  - name: Authentication
    description: C√°c API li√™n quan ƒë·∫øn x√°c th·ª±c ng∆∞·ªùi d√πng (/api/auth) - Tr·∫£ v·ªÅ userId
  - name: User
    description: C√°c API li√™n quan ƒë·∫øn th√¥ng tin ng∆∞·ªùi d√πng (/api/users) - C·∫ßn userId
  - name: Movie
    description: C√°c API li√™n quan ƒë·∫øn phim (/api/movies)
  - name: Episode
    description: C√°c API li√™n quan ƒë·∫øn t·∫≠p phim (/api/episodes)
  - name: Favorite
    description: C√°c API li√™n quan ƒë·∫øn danh s√°ch y√™u th√≠ch (/api/favorites) - C·∫ßn userId
  - name: Payment
    description: C√°c API li√™n quan ƒë·∫øn thanh to√°n (/api/payments) - C·∫ßn userId
  - name: Rating
    description: C√°c API li√™n quan ƒë·∫øn ƒë√°nh gi√° (/api/ratings) - C·∫ßn userId
  - name: Genre
    description: C√°c API li√™n quan ƒë·∫øn th·ªÉ lo·∫°i phim (/api/genres)
  - name: Home
    description: C√°c API trang ch·ªß (/api/home) - Banner, phim m·ªõi, ƒë·ªÅ xu·∫•t

paths:
  /api/auth/register/send-otp:
    post:
      tags:
        - Authentication
      summary: G·ª≠i m√£ OTP ƒëƒÉng k√Ω
      description: |
        G·ª≠i m√£ OTP ƒë·∫øn s·ªë ƒëi·ªán tho·∫°i ƒë·ªÉ b·∫Øt ƒë·∫ßu qu√° tr√¨nh ƒëƒÉng k√Ω.
        - M√£ OTP s·∫Ω ƒë∆∞·ª£c g·ª≠i qua SMS
        - OTP c√≥ 6 s·ªë
        - ƒê·ªãnh d·∫°ng s·ªë ƒëi·ªán tho·∫°i:
          - B·∫Øt ƒë·∫ßu b·∫±ng 0 ho·∫∑c +84
          - Ch·ªâ ch·ª©a s·ªë, kh√¥ng c√≥ k√Ω t·ª± ƒë·∫∑c bi·ªát
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PhoneRequest'
      responses:
        '200':
          description: G·ª≠i OTP th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
              example:
                status: "success"
                message: "Vui l√≤ng x√°c th·ª±c s·ªë ƒëi·ªán tho·∫°i c·ªßa b·∫°n"
                data:
                  phone: "0912345678"
        '400':
          description: L·ªói validate s·ªë ƒëi·ªán tho·∫°i
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                status: "error"
                message: "S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá"
        '429':
          description: V∆∞·ª£t qu√° s·ªë l·∫ßn g·ª≠i OTP cho ph√©p
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                status: "error"
                message: "Vui l√≤ng th·ª≠ l·∫°i sau"

  /api/auth/register/verify-otp:
    post:
      tags:
        - Authentication
      summary: X√°c th·ª±c OTP ƒëƒÉng k√Ω
      description: |
        X√°c th·ª±c m√£ OTP ƒë√£ g·ª≠i ƒë·∫øn s·ªë ƒëi·ªán tho·∫°i.
        - OTP ph·∫£i ƒë√∫ng v·ªõi m√£ ƒë√£ g·ª≠i
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyOTPRequest'
      responses:
        '200':
          description: X√°c th·ª±c OTP th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
              example:
                status: "success"
                message: "X√°c th·ª±c OTP th√†nh c√¥ng"
        '400':
          description: M√£ OTP kh√¥ng h·ª£p l·ªá ho·∫∑c ƒë√£ h·∫øt h·∫°n
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                status: "error"
                message: "M√£ OTP kh√¥ng h·ª£p l·ªá ho·∫∑c ƒë√£ h·∫øt h·∫°n"

  /api/auth/register/complete:
    post:
      tags:
        - Authentication
      summary: Ho√†n t·∫•t ƒëƒÉng k√Ω
      description: |
        Ho√†n t·∫•t qu√° tr√¨nh ƒëƒÉng k√Ω sau khi ƒë√£ x√°c th·ª±c s·ªë ƒëi·ªán tho·∫°i.
        
        **‚ö†Ô∏è QUAN TR·ªåNG:** 
        - Response s·∫Ω tr·∫£ v·ªÅ `userId` thay v√¨ tokens
        - Frontend c·∫ßn l∆∞u `userId` ƒë·ªÉ s·ª≠ d·ª•ng cho c√°c API kh√°c
        - Kh√¥ng c·∫ßn qu·∫£n l√Ω tokens n·ªØa
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: ƒêƒÉng k√Ω th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
              example:
                status: "success"
                message: "ƒêƒÉng k√Ω th√†nh c√¥ng"
                data:
                  userId: "683d7b63d0ee4aeb15a11369"
                  user:
                    _id: "683d7b63d0ee4aeb15a11369"
                    full_name: "Nguy·ªÖn VƒÉn A"
                    email: "example@gmail.com"
                    phone: "0912345678"
                    gender: "male"
                    is_phone_verified: true
        '400':
          description: L·ªói validate d·ªØ li·ªáu ho·∫∑c email ƒë√£ t·ªìn t·∫°i
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                status: "error"
                message: "Email ƒë√£ ƒë∆∞·ª£c s·ª≠ d·ª•ng"

  /api/auth/login/send-otp:
    post:
      tags:
        - Authentication
      summary: G·ª≠i m√£ OTP ƒëƒÉng nh·∫≠p
      description: |
        G·ª≠i m√£ OTP ƒë·∫øn s·ªë ƒëi·ªán tho·∫°i ƒë·ªÉ ƒëƒÉng nh·∫≠p.
        - ƒêƒÉng nh·∫≠p khi ƒëƒÉng xu·∫•t ho·∫∑c ng∆∞·ªùi d√πng ch∆∞a ƒëƒÉng nh·∫≠p v√†o app.
        - S·ªë ƒëi·ªán tho·∫°i ph·∫£i ƒë√£ ƒë∆∞·ª£c ƒëƒÉng k√Ω.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PhoneRequest'
      responses:
        '200':
          description: G·ª≠i OTP th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
              example:
                status: "success"
                message: "ƒê√£ g·ª≠i m√£ OTP ƒëƒÉng nh·∫≠p"
                data:
                  phone: "0912345678"
        '404':
          description: S·ªë ƒëi·ªán tho·∫°i ch∆∞a ƒëƒÉng k√Ω
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                status: "error"
                message: "S·ªë ƒëi·ªán tho·∫°i ch∆∞a ƒë∆∞·ª£c ƒëƒÉng k√Ω"

  /api/auth/login/verify:
    post:
      tags:
        - Authentication
      summary: X√°c th·ª±c OTP v√† ƒëƒÉng nh·∫≠p
      description: |
        X√°c th·ª±c m√£ OTP ƒë·ªÉ ƒëƒÉng nh·∫≠p.
        
        **‚ö†Ô∏è QUAN TR·ªåNG:**
        - Response s·∫Ω tr·∫£ v·ªÅ `userId` thay v√¨ tokens
        - Frontend c·∫ßn l∆∞u `userId` ƒë·ªÉ s·ª≠ d·ª•ng cho c√°c API kh√°c
        - Kh√¥ng c·∫ßn qu·∫£n l√Ω access/refresh tokens n·ªØa
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyOTPRequest'
      responses:
        '200':
          description: ƒêƒÉng nh·∫≠p th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
              example:
                status: "success"
                message: "ƒêƒÉng nh·∫≠p th√†nh c√¥ng"
                data:
                  userId: "683d7b63d0ee4aeb15a11369"
                  user:
                    _id: "683d7b63d0ee4aeb15a11369"
                    full_name: "Nguy·ªÖn VƒÉn A"
                    email: "example@gmail.com"
                    phone: "0912345678"
                    avatar: "https://example.com/avatar.jpg"
                    is_phone_verified: true
        '400':
          description: M√£ OTP kh√¥ng h·ª£p l·ªá ho·∫∑c ƒë√£ h·∫øt h·∫°n
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/auth/logout:
    post:
      tags:
        - Authentication
      summary: ƒêƒÉng xu·∫•t
      description: |
        ƒêƒÉng xu·∫•t ng∆∞·ªùi d√πng (ch·ªâ tr·∫£ v·ªÅ success message).
        
        **üì± Frontend c·∫ßn l√†m:**
        - X√≥a `userId` kh·ªèi AsyncStorage/localStorage
        - Kh√¥ng c·∫ßn g·ªçi API refresh token hay g√¨ c·∫£
      responses:
        '200':
          description: ƒêƒÉng xu·∫•t th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  message:
                    type: string
                    example: "ƒêƒÉng xu·∫•t th√†nh c√¥ng"

  /api/users/profile:
    get:
      tags:
        - User
      summary: L·∫•y th√¥ng tin profile
      description: |
        L·∫•y th√¥ng tin chi ti·∫øt c·ªßa user.
        
        **üîÑ THAY ƒê·ªîI:** Kh√¥ng c·∫ßn Bearer token, ch·ªâ c·∫ßn truy·ªÅn userId qua query params
      parameters:
        - name: userId
          in: query
          required: true
          schema:
            type: string
          example: "683d7b63d0ee4aeb15a11369"
          description: "ID c·ªßa user c·∫ßn l·∫•y th√¥ng tin"
      responses:
        '200':
          description: L·∫•y th√¥ng tin th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileResponse'
              example:
                status: "success"
                data:
                  user:
                    _id: "683d7b63d0ee4aeb15a11369"
                    full_name: "Nguy·ªÖn VƒÉn A"
                    email: "example@gmail.com"
                    phone: "0912345678"
                    gender: "male"
                    avatar: "https://example.com/avatar.jpg"
                    is_phone_verified: true
        '400':
          description: Thi·∫øu userId ho·∫∑c userId kh√¥ng h·ª£p l·ªá
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                status: "error"
                message: "userId l√† b·∫Øt bu·ªôc"
        '404':
          description: Kh√¥ng t√¨m th·∫•y user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                status: "error"
                message: "Kh√¥ng t√¨m th·∫•y user"

    put:
      tags:
        - User
      summary: C·∫≠p nh·∫≠t profile
      description: |
        C·∫≠p nh·∫≠t th√¥ng tin c√° nh√¢n c·ªßa user.
        
        **üîÑ THAY ƒê·ªîI:** Kh√¥ng c·∫ßn Bearer token, ch·ªâ c·∫ßn truy·ªÅn userId trong request body
        
        C√°c tr∆∞·ªùng c√≥ th·ªÉ c·∫≠p nh·∫≠t:
        - H·ªç v√† t√™n (full_name)
        - S·ªë ƒëi·ªán tho·∫°i (phone)
        - Gi·ªõi t√≠nh (gender: male/female)
        - ·∫¢nh ƒë·∫°i di·ªán (avatar: URL ho·∫∑c null ƒë·ªÉ x√≥a)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - type: object
                  properties:
                    userId:
                      type: string
                      example: "683d7b63d0ee4aeb15a11369"
                      description: "ID c·ªßa user c·∫ßn c·∫≠p nh·∫≠t (B·∫ÆT BU·ªòC)"
                  required:
                    - userId
                - $ref: '#/components/schemas/UpdateProfileRequest'
            example:
              userId: "683d7b63d0ee4aeb15a11369"
              full_name: "Nguy·ªÖn VƒÉn A Updated"
              phone: "0987654321"
              gender: "male"
              avatar: "https://example.com/new-avatar.jpg"
      responses:
        '200':
          description: C·∫≠p nh·∫≠t th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileResponse'
              example:
                status: "success"
                message: "C·∫≠p nh·∫≠t profile th√†nh c√¥ng"
                data:
                  user:
                    _id: "683d7b63d0ee4aeb15a11369"
                    full_name: "Nguy·ªÖn VƒÉn A Updated"
                    email: "example@gmail.com"
                    phone: "0987654321"
                    gender: "male"
                    avatar: "https://example.com/new-avatar.jpg"
                    is_phone_verified: true
        '400':
          description: L·ªói validate d·ªØ li·ªáu ho·∫∑c thi·∫øu userId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                status: "error"
                message: "userId l√† b·∫Øt bu·ªôc"
        '404':
          description: Kh√¥ng t√¨m th·∫•y user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                status: "error"
                message: "Kh√¥ng t√¨m th·∫•y user"

  /api/home/new-releases:
    get:
      tags:
        - Home
      summary: API Banner v√† Phim ƒë·ªÅ xu·∫•t
      description: |
        L·∫•y danh s√°ch phim m·ªõi ra m·∫Øt cho Banner ƒë·∫ßu trang v√† danh s√°ch ·ªü d∆∞·ªõi "Phim d√†nh cho b·∫°n".
        
        **ƒê·∫∑c ƒëi·ªÉm:**
        - Public API (kh√¥ng c·∫ßn ƒëƒÉng nh·∫≠p)
        - Ch·ªâ l·∫•y phim c√≥ release_status = "released"
        - S·∫Øp x·∫øp theo ng√†y t·∫°o m·ªõi nh·∫•t
        - Tr·∫£ v·ªÅ 2 sections ri√™ng bi·ªát
      parameters:
        - name: bannerLimit
          in: query
          required: false
          schema:
            type: integer
            default: 5
            minimum: 1
            maximum: 10
          description: S·ªë l∆∞·ª£ng phim trong banner list (m·∫∑c ƒë·ªãnh 5)
          example: 3
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 6
            minimum: 1
            maximum: 12
          description: S·ªë l∆∞·ª£ng phim trong grid "Phim d√†nh cho b·∫°n" (m·∫∑c ƒë·ªãnh 6)
          example: 4
        - name: days
          in: query
          required: false
          schema:
            type: integer
            default: 30
            minimum: 1
            maximum: 365
          description: L·∫•y phim m·ªõi trong X ng√†y g·∫ßn ƒë√¢y (m·∫∑c ƒë·ªãnh 30 ng√†y)
          example: 15
      responses:
        '200':
          description: L·∫•y d·ªØ li·ªáu th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  data:
                    type: object
                    properties:
                      banner:
                        type: object
                        properties:
                          title:
                            type: string
                            example: "Phim m·ªõi ra m·∫Øt"
                          type:
                            type: string
                            example: "banner_list"
                          movies:
                            type: array
                            items:
                              $ref: '#/components/schemas/BannerMovie'
                      recommended:
                        type: object
                        properties:
                          title:
                            type: string
                            example: "Phim d√†nh cho b·∫°n"
                          type:
                            type: string
                            example: "grid"
                          movies:
                            type: array
                            items:
                              $ref: '#/components/schemas/GridMovie'
        '500':
          description: L·ªói server
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/home/continue-watching:
    get:
      tags:
        - Home
      summary: API ƒêang xem (C·∫ßn userId s·∫Ω ph√°t tri·ªÉn trong t∆∞∆°ng lai)
      description: |
        L·∫•y danh s√°ch phim ƒëang xem c·ªßa user.
        
        **üîÑ THAY ƒê·ªîI:** C·∫ßn truy·ªÅn userId qua query params thay v√¨ Bearer token
      parameters:
        - name: userId
          in: query
          required: true
          schema:
            type: string
          example: "683d7b63d0ee4aeb15a11369"
          description: "ID c·ªßa user c·∫ßn l·∫•y danh s√°ch ƒëang xem"
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 8
          example: 8
      responses:
        '200':
          description: L·∫•y d·ªØ li·ªáu th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  data:
                    type: object
                    properties:
                      title:
                        type: string
                        example: "ƒêang xem"
                      type:
                        type: string
                        example: "continue_watching"
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            movieId:
                              type: string
                              example: "60d5ecb74df5e2001f8b4567"
                            title:
                              type: string
                              example: "Avatar"
                            poster:
                              type: string
                              example: "https://example.com/poster.jpg"
                            progress:
                              type: number
                              example: 0.65
                            lastWatchedAt:
                              type: string
                              format: date-time
                              example: "2023-12-01T10:30:00Z"
        '400':
          description: Thi·∫øu userId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                status: "error"
                message: "userId l√† b·∫Øt bu·ªôc"

  /api/home/trending:
    get:
      tags:
        - Home
      summary: API Phim ƒëang th·ªãnh h√†nh
      description: |
        L·∫•y danh s√°ch phim ƒëang th·ªãnh h√†nh (ƒë∆∞·ª£c xem nhi·ªÅu nh·∫•t).
        
        **ƒê·∫∑c ƒëi·ªÉm:**
        - Public API (kh√¥ng c·∫ßn ƒëƒÉng nh·∫≠p)
        - S·∫Øp x·∫øp theo view count
        - Format gi·ªëng GridMovie
      parameters:
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 7
            minimum: 1
            maximum: 20
          description: S·ªë l∆∞·ª£ng phim trending (m·∫∑c ƒë·ªãnh 7)
          example: 7
      responses:
        '200':
          description: L·∫•y d·ªØ li·ªáu th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  data:
                    type: object
                    properties:
                      title:
                        type: string
                        example: "Phim ƒëang th·ªãnh h√†nh"
                      type:
                        type: string
                        example: "grid"
                      movies:
                        type: array
                        items:
                          $ref: '#/components/schemas/GridMovie'
        '500':
          description: L·ªói server
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/home/top-rated:
    get:
      tags:
        - Home
      summary: API Phim ƒë∆∞·ª£c ƒë√°nh gi√° cao
      description: |
        L·∫•y danh s√°ch phim ƒë∆∞·ª£c ƒë√°nh gi√° cao nh·∫•t.
        
        **ƒê·∫∑c ƒëi·ªÉm:**
        - Public API (kh√¥ng c·∫ßn ƒëƒÉng nh·∫≠p)
        - S·∫Øp x·∫øp theo rating
        - Ch·ªâ l·∫•y phim c√≥ rating > 0
      parameters:
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 8
            minimum: 1
            maximum: 20
          description: S·ªë l∆∞·ª£ng phim top-rated (m·∫∑c ƒë·ªãnh 8)
          example: 8
      responses:
        '200':
          description: L·∫•y d·ªØ li·ªáu th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  data:
                    type: object
                    properties:
                      title:
                        type: string
                        example: "Phim ƒë∆∞·ª£c ƒë√°nh gi√° cao"
                      type:
                        type: string
                        example: "grid"
                      movies:
                        type: array
                        items:
                          $ref: '#/components/schemas/GridMovie'
        '500':
          description: L·ªói server
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/home/sports:
    get:
      tags:
        - Home
      summary: API S·ª± ki·ªán th·ªÉ thao
      description: |
        L·∫•y danh s√°ch s·ª± ki·ªán th·ªÉ thao.
        
        **ƒê·∫∑c ƒëi·ªÉm:**
        - Public API (kh√¥ng c·∫ßn ƒëƒÉng nh·∫≠p)
        - Ch·ªâ l·∫•y movie_type = "Th·ªÉ thao"
        - Filter theo status (upcoming, released, ended)
      parameters:
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 8
            minimum: 1
            maximum: 20
          description: S·ªë l∆∞·ª£ng s·ª± ki·ªán th·ªÉ thao (m·∫∑c ƒë·ªãnh 8)
          example: 8
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum: [upcoming, released, ended]
          description: |
            Filter theo tr·∫°ng th√°i s·ª± ki·ªán:
            - upcoming: S·ª± ki·ªán s·∫Øp di·ªÖn ra
            - released: S·ª± ki·ªán ƒë√£ ph√°t h√†nh (m·∫∑c ƒë·ªãnh)
            - ended: S·ª± ki·ªán ƒë√£ k·∫øt th√∫c
          example: released
      responses:
        '200':
          description: L·∫•y d·ªØ li·ªáu th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  data:
                    type: object
                    properties:
                      title:
                        type: string
                        example: "S·ª± ki·ªán th·ªÉ thao"
                      type:
                        type: string
                        example: "grid"
                      movies:
                        type: array
                        items:
                          $ref: '#/components/schemas/GridMovie'
        '500':
          description: L·ªói server
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/home/anime:
    get:
      tags:
        - Home
      summary: API Anime/Ho·∫°t h√¨nh hot
      description: |
        L·∫•y danh s√°ch anime/ho·∫°t h√¨nh n·ªïi b·∫≠t v·ªõi logic ƒë·∫∑c tr∆∞ng.
        **Fontend s·ª≠ d·ª•ng cho:**
        - Section "Anime hot"
        - Grid layout ho·∫°t h√¨nh
        - Hi·ªÉn th·ªã poster anime v·ªõi t·ªâ l·ªá ƒë·∫∑c bi·ªát
      parameters:
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 8
            minimum: 1
            maximum: 20
          description: S·ªë l∆∞·ª£ng anime hot (m·∫∑c ƒë·ªãnh 8)
          example: 8
      responses:
        '200':
          description: L·∫•y d·ªØ li·ªáu th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  data:
                    type: object
                    properties:
                      title:
                        type: string
                        example: "Anime hot"
                      type:
                        type: string
                        example: "grid"
                      movies:
                        type: array
                        items:
                          $ref: '#/components/schemas/GridMovie'
              example:
                status: "success"
                data:
                  title: "Anime hot"
                  type: "grid"
                  movies: []
        '500':
          description: L·ªói server
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                status: "error"
                message: "L·ªói khi l·∫•y anime hot"

  /api/home/vietnamese:
    get:
      tags:
        - Home
      summary: API Phim Vi·ªát ƒë·∫∑c s·∫Øc
      description: |
        L·∫•y danh s√°ch phim Vi·ªát Nam v·ªõi logic t√¨m ki·∫øm ƒë·∫∑c tr∆∞ng.
        
        **Logic ƒë·∫∑c tr∆∞ng:**
        - S·∫Øp x·∫øp theo rating (phim c√≥ rating cao nh·∫•t)
        - T√≠nh to√°n rating/viewCount        
        **Fontend s·ª≠ d·ª•ng cho:**
        - Section "Phim Vi·ªát ƒë·∫∑c s·∫Øc"
        - Grid layout phim Vi·ªát
        - Hi·ªÉn th·ªã poster phim Vi·ªát Nam
      parameters:
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 8
            minimum: 1
            maximum: 20
          description: S·ªë l∆∞·ª£ng phim Vi·ªát (m·∫∑c ƒë·ªãnh 8)
          example: 8
      responses:
        '200':
          description: L·∫•y d·ªØ li·ªáu th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  data:
                    type: object
                    properties:
                      title:
                        type: string
                        example: "Phim Vi·ªát ƒë·∫∑c s·∫Øc"
                      type:
                        type: string
                        example: "grid"
                      movies:
                        type: array
                        items:
                          $ref: '#/components/schemas/GridMovie'
              example:
                status: "success"
                data:
                  title: "Phim Vi·ªát ƒë·∫∑c s·∫Øc"
                  type: "grid"
                  movies:
                    - movieId: "683fb55d88e880e019875aa7"
                      title: "M√¨nh Y√™u Nhau, B√¨nh Y√™n Th√¥i"
                      poster: "https://locdev-bucket.s3.ap-southeast-1.amazonaws.com/assets/tinh-cam/minh-yeu-nhau-binh-yen-thoi.jpg"
                      movieType: "Phim b·ªô"
                      producer: "SK Pictures, VTV3"
                    - movieId: "683e6774602b36157f1c7b18"
                      title: "G·∫∑p L·∫°i Ch·ªã B·∫ßu"
                      poster: "https://locdev-bucket.s3.ap-southeast-1.amazonaws.com/assets/hai/gap-lai-chi-bau-500_1707203931098.jpg"
                      movieType: "Phim l·∫ª"
                      producer: "CJ Entertainment Vietnam"
                    - movieId: "683fb6e188e880e019875ac3"
                      title: "Ng√†y X∆∞a C√≥ M·ªôt Chuy·ªán T√¨nh"
                      poster: "https://locdev-bucket.s3.ap-southeast-1.amazonaws.com/assets/tinh-cam/ngay-xua-co-cau-chuyen-tinh.jpg"
                      movieType: "Phim l·∫ª"
                      producer: "HK Film, H√£ng phim Anh T·ªÖu"
        '500':
          description: L·ªói server
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                status: "error"
                message: "L·ªói khi l·∫•y phim Vi·ªát"

  /api/home/coming-soon:
    get:
      tags:
        - Home
      summary: API Phim s·∫Øp chi·∫øu (ƒë·∫∑t l·ªãch s·∫Ω ph√°t tri·ªÉn trong t∆∞∆°ng lai)
      description: |
        L·∫•y danh s√°ch phim s·∫Øp chi·∫øu v·ªõi logic ƒë·∫∑c tr∆∞ng.
        **Fontend s·ª≠ d·ª•ng cho:**
        - Section "S·∫Øp chi·∫øu"
        - Grid layout phim s·∫Øp chi·∫øu
        - Hi·ªÉn th·ªã poster + th√¥ng tin c∆° b·∫£n
        - C√≥ th·ªÉ th√™m countdown timer ƒë·∫øn ng√†y chi·∫øu
      parameters:
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 8
            minimum: 1
            maximum: 20
          description: S·ªë l∆∞·ª£ng phim s·∫Øp chi·∫øu (m·∫∑c ƒë·ªãnh 8)
          example: 8
        - name: days
          in: query
          required: false
          schema:
            type: integer
            default: 30
            minimum: 1
            maximum: 365
          description: L·∫•y phim s·∫Øp chi·∫øu trong X ng√†y t·ªõi (m·∫∑c ƒë·ªãnh 30 ng√†y)
          example: 15
      responses:
        '200':
          description: L·∫•y d·ªØ li·ªáu th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  data:
                    type: object
                    properties:
                      title:
                        type: string
                        example: "S·∫Øp chi·∫øu"
                      type:
                        type: string
                        example: "grid"
                      movies:
                        type: array
                        items:
                          $ref: '#/components/schemas/GridMovie'
              example:
                status: "success"
                data:
                  title: "S·∫Øp chi·∫øu"
                  type: "grid"
                  movies:
                    - movieId: "683fb76c88e880e019875acb"
                      title: "Avatar: The Way of Water 2"
                      poster: "https://locdev-bucket.s3.ap-southeast-1.amazonaws.com/assets/hanh-dong/avatar-way-of-water-2.jpg"
                      movieType: "Phim l·∫ª"
                      producer: "20th Century Studios"
                    - movieId: "683e922d88e880e019875a1f"
                      title: "World Cup 2026 Final"
                      poster: "https://locdev-bucket.s3.ap-southeast-1.amazonaws.com/assets/sports/world-cup-2026.jpg"
                      movieType: "Th·ªÉ thao"
                      producer: "FIFA"
        '500':
          description: L·ªói server
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                status: "error"
                message: "L·ªói khi l·∫•y phim s·∫Øp chi·∫øu"

components:
  schemas:
    PhoneRequest:
      type: object
      required:
        - phone
      properties:
        phone:
          type: string
          example: "0912345678"
          description: |
            S·ªë ƒëi·ªán tho·∫°i c·ªßa ng∆∞·ªùi d√πng
            - Format: 0xxxxxxxxx ho·∫∑c +84xxxxxxxxx
            - Ph·∫£i l√† s·ªë ƒëi·ªán tho·∫°i Vi·ªát Nam h·ª£p l·ªá
            - Kh√¥ng ƒë∆∞·ª£c ch·ª©a k√Ω t·ª± ƒë·∫∑c bi·ªát ho·∫∑c kho·∫£ng tr·∫Øng

    VerifyOTPRequest:
      type: object
      required:
        - phone
        - otp
      properties:
        phone:
          type: string
          example: "0912345678"
          description: S·ªë ƒëi·ªán tho·∫°i ƒë√£ d√πng ƒë·ªÉ nh·∫≠n OTP
        otp:
          type: string
          example: "123456"
          description: M√£ OTP 6 s·ªë nh·∫≠n ƒë∆∞·ª£c qua SMS

    RegisterRequest:
      type: object
      required:
        - full_name
        - email
        - gender
      properties:
        full_name:
          type: string
          example: "Nguy·ªÖn VƒÉn A"
          description: H·ªç v√† t√™n ng∆∞·ªùi d√πng
        email:
          type: string
          format: email
          example: "example@gmail.com"
          description: Email ng∆∞·ªùi d√πng (ph·∫£i l√† email h·ª£p l·ªá v√† ch∆∞a ƒë∆∞·ª£c s·ª≠ d·ª•ng)
        gender:
          type: string
          enum: [male, female]
          example: "male"
          description: Gi·ªõi t√≠nh (male = Nam, female = N·ªØ)

    UpdateProfileRequest:
      type: object
      properties:
        full_name:
          type: string
          example: "Nguy·ªÖn VƒÉn A"
          description: "H·ªç v√† t√™n ng∆∞·ªùi d√πng"
        phone:
          type: string
          example: "0987654321"
          description: "S·ªë ƒëi·ªán tho·∫°i"
        gender:
          type: string
          enum: [male, female]
          example: "male"
          description: "Gi·ªõi t√≠nh (male = Nam, female = N·ªØ)"
        avatar:
          type: string
          example: "https://example.com/avatar.jpg"
          description: "URL ·∫£nh ƒë·∫°i di·ªán (null ƒë·ªÉ x√≥a avatar)"

    AuthResponse:
      type: object
      properties:
        status:
          type: string
          example: "success"
        message:
          type: string
          example: "ƒêƒÉng nh·∫≠p th√†nh c√¥ng"
        data:
          type: object
          properties:
            userId:
              type: string
              example: "683d7b63d0ee4aeb15a11369"
              description: "‚ö†Ô∏è L∆ØU L·∫†I C√ÅI N√ÄY! D√πng cho t·∫•t c·∫£ APIs c·∫ßn authentication"
            user:
              $ref: '#/components/schemas/UserInfo'
          description: "Kh√¥ng c√≤n tr·∫£ v·ªÅ tokens n·ªØa, ch·ªâ c√≥ userId v√† user info"

    ProfileResponse:
      type: object
      properties:
        status:
          type: string
          example: "success"
        message:
          type: string
          example: "L·∫•y th√¥ng tin th√†nh c√¥ng"
        data:
          type: object
          properties:
            user:
              $ref: '#/components/schemas/UserInfo'

    UserInfo:
      type: object
      properties:
        _id:
          type: string
          example: "683d7b63d0ee4aeb15a11369"
        full_name:
          type: string
          example: "Nguy·ªÖn VƒÉn A"
        email:
          type: string
          example: "example@gmail.com"
        phone:
          type: string
          example: "0912345678"
        gender:
          type: string
          example: "male"
        avatar:
          type: string
          example: "https://example.com/avatar.jpg"
        is_phone_verified:
          type: boolean
          example: true

    SuccessResponse:
      type: object
      properties:
        status:
          type: string
          example: "success"
        message:
          type: string

    ErrorResponse:
      type: object
      properties:
        status:
          type: string
          example: "error"
        message:
          type: string
          example: "L·ªói x·ª≠ l√Ω y√™u c·∫ßu"

    BannerMovie:
      type: object
      description: Schema cho phim trong banner section
      properties:
        movieId:
          type: string
          example: "683fb76c88e880e019875aca"
          description: ID c·ªßa phim
        title:
          type: string
          example: "1000 Years Old"
          description: T√™n phim
        poster:
          type: string
          example: "https://locdev-bucket.s3.ap-southeast-1.amazonaws.com/assets/tinh-cam/phimbo-1000-years-old.jpg"
          description: URL poster phim
        description:
          type: string
          nullable: true
          example: "Phim l·∫ª Vi·ªát Nam d·ª±a tr√™n truy·ªán d√†i c√πng t√™n c·ªßa Nguy·ªÖn Nh·∫≠t √Ånh..."
          description: M√¥ t·∫£ phim (c√≥ th·ªÉ null)
        releaseYear:
          type: integer
          nullable: true
          example: 2024
          description: NƒÉm ph√°t h√†nh (c√≥ th·ªÉ null)
        movieType:
          type: string
          example: "Phim b·ªô"
          description: Lo·∫°i phim (Phim b·ªô, Phim l·∫ª, Th·ªÉ thao)
        producer:
          type: string
          example: "WeTV Thailand"
          description: Nh√† s·∫£n xu·∫•t
        genres:
          type: array
          items:
            type: string
          example: ["T√¨nh c·∫£m", "Kinh d·ªã"]
          description: Danh s√°ch th·ªÉ lo·∫°i (t·ªëi ƒëa 3)

    GridMovie:
      type: object
      description: Schema cho phim trong grid section
      properties:
        movieId:
          type: string
          example: "683fb76c88e880e019875aca"
          description: ID c·ªßa phim
        title:
          type: string
          example: "1000 Years Old"
          description: T√™n phim
        poster:
          type: string
          example: "https://locdev-bucket.s3.ap-southeast-1.amazonaws.com/assets/tinh-cam/phimbo-1000-years-old.jpg"
          description: URL poster phim
        movieType:
          type: string
          example: "Phim b·ªô"
          description: Lo·∫°i phim (Phim b·ªô, Phim l·∫ª, Th·ªÉ thao)
        producer:
          type: string
          example: "WeTV Thailand"
          description: Nh√† s·∫£n xu·∫•t